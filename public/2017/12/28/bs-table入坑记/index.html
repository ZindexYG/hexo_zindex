<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-z-16x16.ico " />
  
  
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-z-16x16.ico " />
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-z-32x32.ico">
  
  
  <title>bs-table入坑记 - 时之物语</title>
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head>


  <body class="">
    <div class="container">
      <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">时之物语</a>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
      <li class="menu-item">
        <a href="/" class="menu-item-link menu-item-home">Home</a>
      </li>
      
      <li class="menu-item">
        <a href="/about" class="menu-item-link menu-item-about">About</a>
      </li>
      
      <li class="menu-item">
        <a href="/links" class="menu-item-link menu-item-friends">Friends</a>
      </li>
      
    </ul>
  </nav>
</header>

        <main class="main">
          
  <input type="checkbox" id="toggle-toc" class="toggle-toc-right" />
  <div class="toc-toggle toc-toggle-right">
    <label for="toggle-toc">
      <i class="fa fa-list-ol"></i>
    </label>
    <div class="toc-wrap toc-wrap-right">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#bootstrap-table"><span class="toc-number">1.</span> <span class="toc-text">bootstrap-table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基础玩法"><span class="toc-number">2.</span> <span class="toc-text">基础玩法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化插件参数"><span class="toc-number">3.</span> <span class="toc-text">初始化插件参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#直接在标签里面添加参数"><span class="toc-number">3.1.</span> <span class="toc-text">直接在标签里面添加参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用-js-初始化带入参数"><span class="toc-number">3.2.</span> <span class="toc-text">使用 js 初始化带入参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#进阶玩法"><span class="toc-number">4.</span> <span class="toc-text">进阶玩法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重要参数"><span class="toc-number">5.</span> <span class="toc-text">重要参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#html-里初始化基本的参数"><span class="toc-number">5.1.</span> <span class="toc-text">html 里初始化基本的参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js-里完成请求与数据处理"><span class="toc-number">5.2.</span> <span class="toc-text">js 里完成请求与数据处理</span></a></li></ol></li></ol>
    </div>
  </div>
  <label class="mask" for="toggle-toc"></label>

<div id="post-content">
  <h1>bs-table入坑记</h1>
  <p><img src="/images/BTable-banner.jpg" alt=""></p>
<blockquote>
<p>本文旨在记录我使用 bootstrap-table 时候的一些记录,和与部分需求结合的使用情况</p>
</blockquote>
<a id="more"></a>

<h3 id="bootstrap-table"><a href="#bootstrap-table" class="headerlink" title="bootstrap-table"></a><a href="http://bootstrap-table.wenzhixin.net.cn/zh-cn/" target="_blank" rel="noopener">bootstrap-table</a></h3><p>基于 jQuery 的表格插件，重在该有的都有，相当适合上手，下称 <code>bs-table</code></p>
<h3 id="基础玩法"><a href="#基础玩法" class="headerlink" title="基础玩法"></a>基础玩法</h3><p>最基本的引入和把玩，并没有很多高超的技巧，只要引入了　<code>css</code>，和 <code>js</code>，在不适用的情况下，在 <code>table</code>标签内直接添加 <code>data-toggle=&quot;table&quot;</code> 也是可以激活 <code>bs-table</code></p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../style/bootstrap.min.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../style/bootstrap-table.min.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token comment" spellcheck="true">&lt;!-- some more... --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>
      <span class="token comment" spellcheck="true">&lt;!-- some --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">></span></span>
      <span class="token comment" spellcheck="true">&lt;!-- some --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataBody<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>
 <span class="token comment" spellcheck="true">&lt;!-- some more... --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/bootstrap.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/bootstrap-table.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../js/bootstrap-table-zh-CN.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="初始化插件参数"><a href="#初始化插件参数" class="headerlink" title="初始化插件参数"></a>初始化插件参数</h3><p>具体文档已<a href="http://bootstrap-table.wenzhixin.net.cn/zh-cn/documentation/" target="_blank" rel="noopener">官方</a>为主，官方的翻译也还好，此处列举代码里面的参数都是本人常用的，初始化插件参数的方式有两种：</p>
<h4 id="直接在标签里面添加参数"><a href="#直接在标签里面添加参数" class="headerlink" title="直接在标签里面添加参数"></a>直接在标签里面添加参数</h4><pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table text-nowrap<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-toggle</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-checkbox-header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-toggle</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-columns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-query-params-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>undefined<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-refresh</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-search</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-strict-search</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token comment" spellcheck="true">&lt;!-- some --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="使用-js-初始化带入参数"><a href="#使用-js-初始化带入参数" class="headerlink" title="使用 js 初始化带入参数"></a>使用 <code>js</code> 初始化带入参数</h4><pre class="line-numbers language-html"><code class="language-html">&lt;table class="table text-nowrap" id="myTable"

  <span class="token comment" spellcheck="true">&lt;!-- some --></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>因为引入了 <code>jQuery</code> ,所以直接用就好了</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> $myTable <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#myTable'</span><span class="token punctuation">)</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#myTable'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bootstrapTable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    showHeader<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    showFooter<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    showColumns<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">//....</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="进阶玩法"><a href="#进阶玩法" class="headerlink" title="进阶玩法"></a>进阶玩法</h3><p>好了，基本的玩法之后熟悉之后，还是需要数据来玩，才能把　<code>bs-table</code> 玩得出彩；</p>
<p>后台返回来的数据结构，一般会包含<code>当前页码</code>，<code>每页的数据量</code>，<code>数据总和</code>，<code>table 数据本身</code>;</p>
<p>这里的演示，都在借助<a href="https://www.juhe.cn/" target="_blank" rel="noopener">聚合数据</a>里的免费图书数据；</p>
<p>这边只作本人习惯的写法，过多的就不写了；</p>
<h3 id="重要参数"><a href="#重要参数" class="headerlink" title="重要参数"></a>重要参数</h3><table>
<thead>
<tr>
<th>名称</th>
<th>标签</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>height</td>
<td>data-height</td>
<td>Number</td>
<td>undefined</td>
<td>定义表格的高度</td>
</tr>
<tr>
<td>striped</td>
<td>data-striped</td>
<td>Boolean</td>
<td>false</td>
<td>设置为 true 会有隔行变色效果</td>
</tr>
<tr>
<td>sortName</td>
<td>data-sort-name</td>
<td>String</td>
<td>undefined</td>
<td>定义排序列,通过url方式获取数据填写字段名，否则填写下标</td>
</tr>
<tr>
<td>sortOrder</td>
<td>data-sort-order</td>
<td>String</td>
<td>‘asc’</td>
<td>定义排序方式 ‘asc’ 或者 ‘desc’</td>
</tr>
<tr>
<td>idField</td>
<td>data-id-field</td>
<td>String</td>
<td>undefined</td>
<td>指定主键列</td>
</tr>
<tr>
<td>checkboxHeader</td>
<td>data-checkbox-header</td>
<td>Boolean</td>
<td>true</td>
<td>设置 false 将在列头隐藏check-all checkbox</td>
</tr>
<tr>
<td>silentSort</td>
<td>data-silent-sort</td>
<td>Boolean</td>
<td>true</td>
<td>设置为 false 将在点击分页按钮时，自动记住排序项；仅在 sidePagination设置为 server时生效</td>
</tr>
<tr>
<td>ajax</td>
<td>data-ajax</td>
<td>Function</td>
<td>undefined</td>
<td>自定义 AJAX 方法,须实现 jQuery AJAX API</td>
</tr>
<tr>
<td>queryParams</td>
<td>data-query-params</td>
<td>Function</td>
<td>function(params) {return params;}</td>
<td>请求服务器数据时，你可以通过重写参数的方式添加一些额外的参数，例如 toolbar 中的参数 如果 queryParamsType = ‘limit’ ,返回参数必须包含 limit, offset, search, sort, order 否则, 需要包含: pageSize, pageNumber, searchText, sortName, sortOrder 返回false将会终止请求</td>
</tr>
<tr>
<td>queryParamsType</td>
<td>data-query-params-type</td>
<td>String</td>
<td>‘limit’</td>
<td>设置为 ‘limit’ 则会发送符合 RESTFul 格式的参数.</td>
</tr>
<tr>
<td>responseHandler</td>
<td>data-response-handler</td>
<td>Function</td>
<td>function(res) {return res;}</td>
<td>加载服务器数据之前的处理程序，可以用来格式化数据，参数：res为从服务器请求到的数据；</td>
</tr>
<tr>
<td>sidePagination</td>
<td>data-side-pagination</td>
<td>String</td>
<td>‘client’</td>
<td>设置在哪里进行分页，可选值为 ‘client’ 或者 ‘server’。设置 ‘server’时，必须设置 服务器数据地址（url）或者重写ajax方法</td>
</tr>
<tr>
<td>pageNumber</td>
<td>data-page-number</td>
<td>Number</td>
<td>1</td>
<td>如果设置了分页，首页页码</td>
</tr>
<tr>
<td>pageSize</td>
<td>data-page-size</td>
<td>Number</td>
<td>10</td>
<td>如果设置了分页，页面数据条数</td>
</tr>
<tr>
<td>pageList</td>
<td>data-page-list</td>
<td>Array</td>
<td>[10, 25, 50, 100, All]</td>
<td>如果设置了分页，设置可供选择的页面数据条数。设置为 All 或者 Unlimited，则显示所有记录。</td>
</tr>
</tbody></table>
<h4 id="html-里初始化基本的参数"><a href="#html-里初始化基本的参数" class="headerlink" title="html 里初始化基本的参数"></a><code>html</code> 里初始化基本的参数</h4><pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table text-nowrap<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#myTable<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-checkbox-header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-toggle</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-columns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-toolbar</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#toolbar<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-query-params-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>undefined<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-refresh</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-pagination-loop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-pagination-switch</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-side-pagination</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>server<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-pagination</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-search</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-strict-search</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">data-show-export</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">data-field</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getCheck<span class="token punctuation">"</span></span> <span class="token attr-name">data-checkbox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">data-field</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>书名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">data-field</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sub1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>简介<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">data-field</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>购买数量<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- some --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="js-里完成请求与数据处理"><a href="#js-里完成请求与数据处理" class="headerlink" title="js 里完成请求与数据处理"></a><code>js</code> 里完成请求与数据处理</h4><pre class="line-numbers language-javascript"><code class="language-javascript">
<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://apis.juhe.cn/goodbook/querycatalog_id=242&amp;dtype=&amp;key=adbe8a45c24acd16f0315f4ee463215b'</span>
  <span class="token keyword">var</span> $myTable <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#myTable'</span><span class="token punctuation">)</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#myTable'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bootstrapTable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//.... option init</span>
    ajax<span class="token punctuation">:</span> ajaxRequest<span class="token punctuation">,</span>
    responseHandler<span class="token punctuation">:</span> responseHandler<span class="token punctuation">,</span>
    queryParams<span class="token punctuation">:</span> queryParams<span class="token punctuation">,</span>
    pageList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    pageSize<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
    pageNumber<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    silent<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment" spellcheck="true">//ajax 请求</span>
  <span class="token keyword">function</span> <span class="token function">ajaxRequest</span><span class="token punctuation">(</span>parames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> parames<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>result<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> xhr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">//返回值处理</span>
        result<span class="token punctuation">.</span>resultcode <span class="token operator">?</span> parames<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">//行与总数带入</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token string">"rows"</span><span class="token punctuation">:</span> result<span class="token punctuation">.</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>List<span class="token punctuation">,</span>
            <span class="token string">"total"</span><span class="token punctuation">:</span> result<span class="token punctuation">.</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>totalNum<span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> parames<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        parames<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">//请求参数处理</span>
    <span class="token keyword">function</span> <span class="token function">queryParams</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      params <span class="token operator">=</span> <span class="token punctuation">{</span>
        pageSize<span class="token punctuation">:</span> params<span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
        PageNumber<span class="token punctuation">:</span> params<span class="token punctuation">.</span>pageNumber<span class="token punctuation">,</span>
        pn<span class="token punctuation">:</span> params<span class="token punctuation">.</span>pageNumber<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> params
    <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">//返回值处理</span>
    <span class="token keyword">function</span> <span class="token function">responseHandler</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> pageDate <span class="token operator">=</span> result<span class="token punctuation">.</span>rows <span class="token operator">?</span> result<span class="token punctuation">.</span>rows <span class="token punctuation">:</span> <span class="token number">0</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token string">"rows"</span><span class="token punctuation">:</span> result<span class="token punctuation">.</span>rows <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//总页数,前面的key必须为"total"</span>
        <span class="token string">"total"</span><span class="token punctuation">:</span> result<span class="token punctuation">.</span>total <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//行数据，前面的key要与之前设置的dataField的值一致.</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

</div>

<script>
  // I'm not sure your browser supports `es6`
  window.addEventListener('load', function () {
    [].concat(Array.from(document.querySelectorAll('code')), Array.from(document.querySelectorAll('pre'))).filter(function (item) {return item.className.indexOf('language') >= 0}).forEach(function (tag) { tag.classList.add('line-numbers') })
    Prism.highlightAll()

    let scrollY = window.scrollY
    let headersList = Array.from(document.querySelector('#post-content').querySelectorAll('h1,h2,h3,h4,h5,h6')).map(function (item) {
      let rect = item.getBoundingClientRect()
      let anchorTag = document.querySelector(`a.toc-link[href="#${item.id}"]`)

      if (!anchorTag) return
      return {
        top: scrollY + rect.top - rect.height,
        tag: item,
        anchorTag: anchorTag
      }
    }).filter(function (item) { return item })

    window.addEventListener('scroll', debounce(scrollHandler, 200))
    scrollHandler()

    function scrollHandler () {
      let scrollY = window.scrollY
      let minInfo = null

      for (let item of headersList) {
        if (!minInfo) {
          minInfo = item
          continue
        }

        if ((scrollY - item.top) >= 0 && (scrollY - minInfo.top) > (scrollY - item.top)) {
          minInfo = item
        }
      }

      if (minInfo) {
        headersList.forEach(function (item) {
          item.anchorTag && item.anchorTag.classList.remove('selected')
        })
        minInfo.anchorTag.classList.add('selected')
      }
    }

    function debounce (func, delay) {
      let debounceIdentify = 0
      return function () {
        debounceIdentify && clearTimeout(debounceIdentify)
        debounceIdentify = setTimeout(function () {
          debounceIdentify = 0
          func.apply(this, arguments)
        }, delay)
      }
    }
  })
</script>

        </main>
        <a href="#" class="goto-top">
          <i class="fa fa-chevron-up"></i>
        </a>
    </div>
    <footer class="footer">
  <div class="footer-content">
    <div class="footer-info" class="inner">
      <p class="copyright">&copy; 2020 时之物语 ZYG&#39;s Blog 保留一切权利 ｜ 粤ICP备15078531号-1<br></p>
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      theme by <a href="https://github.com/Jiasm/hexo-theme-sheet" target="_blank">Sheet</a>
    </div>
    <ul class="contact-info">
      
        <a class="contact-link" href="https://github.com/zindexyg" target="_blank"><i class="fa fa-github"></i></a>
      
      
        <a class="contact-link" href="https://weibo.com/u/3249847654" target="_blank"><i class="fa fa-weibo"></i></a>
      
      
      
      
        <a class="contact-link" href="mailto:zinger_yg@163.com" target="_blank"><i class="fa fa-envelope"></i></a>
      
    </ul>
  </div>
</footer>



      <script>
      function footerHandler () {
        if (!window.screen || !document.body) return
        var hasComments = document.querySelector('.comments')
        if ((window.screen.availHeight - (hasComments ? 350 : 0)) > document.body.clientHeight) {
          document.body.classList.add('fixed')
        } else {
          document.body.classList.remove('fixed')
        }
      }
      footerHandler()
      window.addEventListener('resize', footerHandler)
    </script>
  </body>
  <script>
    var pathname = new URL(location.href).pathname.replace(/\/$/, '')

    switch (pathname) {
      case '/home':
        document.querySelector('.menu-item-contact').classList.add('active')
        break
      case '/about':
        document.querySelector('.menu-item-about').classList.add('active')
        break
      case '/links':
        document.querySelector('.menu-item-friends').classList.add('active')
        break
      default:
        document.querySelector('.menu-item-home').classList.add('active')
    }
  </script>
  

</html>
