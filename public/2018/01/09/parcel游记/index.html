<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-z-16x16.ico " />
  
  
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-z-16x16.ico " />
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-z-32x32.ico">
  
  
  <title>parcel 游记 - 时之物语</title>
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head>


  <body class="">
    <div class="container">
      <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">时之物语</a>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
      <li class="menu-item">
        <a href="/" class="menu-item-link menu-item-home">Home</a>
      </li>
      
      <li class="menu-item">
        <a href="/about" class="menu-item-link menu-item-about">About</a>
      </li>
      
      <li class="menu-item">
        <a href="/links" class="menu-item-link menu-item-friends">Friends</a>
      </li>
      
    </ul>
  </nav>
</header>

        <main class="main">
          
  <input type="checkbox" id="toggle-toc" class="toggle-toc-right" />
  <div class="toc-toggle toc-toggle-right">
    <label for="toggle-toc">
      <i class="fa fa-list-ol"></i>
    </label>
    <div class="toc-wrap toc-wrap-right">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分析项目"><span class="toc-number">2.</span> <span class="toc-text">分析项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开始配置"><span class="toc-number">3.</span> <span class="toc-text">开始配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#全局下载-parcel"><span class="toc-number">3.1.</span> <span class="toc-text">全局下载 parcel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建项目"><span class="toc-number">3.2.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#下载与配置所需依赖"><span class="toc-number">3.3.</span> <span class="toc-text">下载与配置所需依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#npm-指令配置"><span class="toc-number">3.4.</span> <span class="toc-text">npm 指令配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">4.</span> <span class="toc-text">总结</span></a></li></ol>
    </div>
  </div>
  <label class="mask" for="toggle-toc"></label>

<div id="post-content">
  <h1>parcel 游记</h1>
  <p><img src="/images/parcel-banner.jpg" alt=""></p>
<blockquote>
<p>本文是记录着两天使用 parcel 的情况，以及遇到的坑（犯过的傻…</p>
</blockquote>
<a id="more"></a>

<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><a href="https://parceljs.org/" target="_blank" rel="noopener">parcel</a>，一款适合小型到中型规模项目（代码行小于 15k）的打包工具；</p>
<h3 id="分析项目"><a href="#分析项目" class="headerlink" title="分析项目"></a>分析项目</h3><p>分析一下：本人的项目内需要的东西不多；</p>
<ul>
<li>babel(用于写 ES6)</li>
<li>SCSS(用于快速的写 css)</li>
<li>normalize.css(清除浏览器自带样式的 css)</li>
</ul>
<h3 id="开始配置"><a href="#开始配置" class="headerlink" title="开始配置"></a>开始配置</h3><h4 id="全局下载-parcel"><a href="#全局下载-parcel" class="headerlink" title="全局下载 parcel"></a>全局下载 parcel</h4><pre class="line-numbers language-git"><code class="language-git">npm install -g parcel-bundler<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><pre><code>mkdir parcel_demo
cd parcel_demo
npm init -y</code></pre><h4 id="下载与配置所需依赖"><a href="#下载与配置所需依赖" class="headerlink" title="下载与配置所需依赖"></a>下载与配置所需依赖</h4><p><code>babel-preset-env</code> 用于转换 es6 语法；</p>
<pre class="line-numbers language-git"><code class="language-git">npm install --save-dev babel-preset-env
echo {<span class="token string">"presets"</span>: [<span class="token string">"env"</span>]} > .babelrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>node-sass</code> 用于转换 scss 语法；</p>
<pre class="line-numbers language-git"><code class="language-git">npm install --save-dev node-sass<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>PostCSS</code> 使用插件转换 CSS 的工具，<code>.postcssrc</code> 文件里面的 <code>modules</code> 设置为 <code>false</code> 的话，打包出来的 css 就不会带 hash 值；</p>
<pre class="line-numbers language-git"><code class="language-git">npm install --save-dev postcss-modules autoprefixer
echo {<span class="token string">"modules"</span>: true,<span class="token string">"plugins"</span>: {<span class="token string">"autoprefixer"</span>: {<span class="token string">"grid"</span>: true}}}>.postcssrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><code>PostHTML</code> 通过插件转换 HTML 的工具</p>
<pre class="line-numbers language-git"><code class="language-git">npm install --save-de posthtml-img-autosize
echo {<span class="token string">"plugins"</span>: {<span class="token string">"posthtml-img-autosize"</span>: {<span class="token string">"root"</span>: <span class="token string">"./images"</span>}}}>.posthtmlrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="npm-指令配置"><a href="#npm-指令配置" class="headerlink" title="npm 指令配置"></a>npm 指令配置</h4><p>打开项目里面的 <code>package.json</code> 文件，找到 <code>scripts</code> 这个字段，配置如下；</p>
<pre class="line-numbers language-json"><code class="language-json">//...
<span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"parcel index.html"</span><span class="token punctuation">,</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"parcel build index.html -d build --public-url ./ "</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
//...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>start</code> 指令 HMR 的配置指令 这个指令不需要任何附带操作，也不需要关系文件之间的路径，打开 <code>http://localhost:1234</code> 即可</p>
<pre class="line-numbers language-git"><code class="language-git">parcel index.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>build</code> 指令是打包指令 后面</p>
<ul>
<li><code>-d</code> 后面跟着的是指打包后存储到那个文件，若没有此文件夹，会自动生成，</li>
<li><code>--public-url</code> 后面跟着的是所有 <code>js</code> <code>css</code>打包后的路径是什么，本人配置 <code>./</code>，表示跟打包后的 <code>index.html</code> 同一级目录</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>本人项目正在进行中，如若遇到什么坑，会后续更新，感谢阅读~</p>

</div>

<script>
  // I'm not sure your browser supports `es6`
  window.addEventListener('load', function () {
    [].concat(Array.from(document.querySelectorAll('code')), Array.from(document.querySelectorAll('pre'))).filter(function (item) {return item.className.indexOf('language') >= 0}).forEach(function (tag) { tag.classList.add('line-numbers') })
    Prism.highlightAll()

    let scrollY = window.scrollY
    let headersList = Array.from(document.querySelector('#post-content').querySelectorAll('h1,h2,h3,h4,h5,h6')).map(function (item) {
      let rect = item.getBoundingClientRect()
      let anchorTag = document.querySelector(`a.toc-link[href="#${item.id}"]`)

      if (!anchorTag) return
      return {
        top: scrollY + rect.top - rect.height,
        tag: item,
        anchorTag: anchorTag
      }
    }).filter(function (item) { return item })

    window.addEventListener('scroll', debounce(scrollHandler, 200))
    scrollHandler()

    function scrollHandler () {
      let scrollY = window.scrollY
      let minInfo = null

      for (let item of headersList) {
        if (!minInfo) {
          minInfo = item
          continue
        }

        if ((scrollY - item.top) >= 0 && (scrollY - minInfo.top) > (scrollY - item.top)) {
          minInfo = item
        }
      }

      if (minInfo) {
        headersList.forEach(function (item) {
          item.anchorTag && item.anchorTag.classList.remove('selected')
        })
        minInfo.anchorTag.classList.add('selected')
      }
    }

    function debounce (func, delay) {
      let debounceIdentify = 0
      return function () {
        debounceIdentify && clearTimeout(debounceIdentify)
        debounceIdentify = setTimeout(function () {
          debounceIdentify = 0
          func.apply(this, arguments)
        }, delay)
      }
    }
  })
</script>

        </main>
        <a href="#" class="goto-top">
          <i class="fa fa-chevron-up"></i>
        </a>
    </div>
    <footer class="footer">
  <div class="footer-content">
    <div class="footer-info" class="inner">
      <p class="copyright">&copy; 2020 时之物语 ZYG&#39;s Blog 保留一切权利 ｜ 粤ICP备15078531号-1<br></p>
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      theme by <a href="https://github.com/Jiasm/hexo-theme-sheet" target="_blank">Sheet</a>
    </div>
    <ul class="contact-info">
      
        <a class="contact-link" href="https://github.com/zindexyg" target="_blank"><i class="fa fa-github"></i></a>
      
      
        <a class="contact-link" href="https://weibo.com/u/3249847654" target="_blank"><i class="fa fa-weibo"></i></a>
      
      
      
      
        <a class="contact-link" href="mailto:zinger_yg@163.com" target="_blank"><i class="fa fa-envelope"></i></a>
      
    </ul>
  </div>
</footer>



      <script>
      function footerHandler () {
        if (!window.screen || !document.body) return
        var hasComments = document.querySelector('.comments')
        if ((window.screen.availHeight - (hasComments ? 350 : 0)) > document.body.clientHeight) {
          document.body.classList.add('fixed')
        } else {
          document.body.classList.remove('fixed')
        }
      }
      footerHandler()
      window.addEventListener('resize', footerHandler)
    </script>
  </body>
  <script>
    var pathname = new URL(location.href).pathname.replace(/\/$/, '')

    switch (pathname) {
      case '/home':
        document.querySelector('.menu-item-contact').classList.add('active')
        break
      case '/about':
        document.querySelector('.menu-item-about').classList.add('active')
        break
      case '/links':
        document.querySelector('.menu-item-friends').classList.add('active')
        break
      default:
        document.querySelector('.menu-item-home').classList.add('active')
    }
  </script>
  

</html>
