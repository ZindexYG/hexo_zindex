<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-z-16x16.ico " />
  
  
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-z-16x16.ico " />
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-z-32x32.ico">
  
  
  <title>愈发熟练的 CSS 技巧 - 时之物语</title>
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head>


  <body class='fixed'>
    <div class="container">
      <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">时之物语</a>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link menu-item-home">Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/about" class="menu-item-link menu-item-about">About</a>
        </li>
      
        <li class="menu-item">
          <a href="/links" class="menu-item-link menu-item-friends">Friends</a>
        </li>
      
    </ul>
  </nav>
</header>

        <main class="main">
          
  <input type="checkbox" id="toggle-toc" class="toggle-toc-right" />
  <div class="toc-toggle toc-toggle-right">
    <label for="toggle-toc">
      <i class="fa fa-list-ol"></i>
    </label>
    <div class="toc-wrap toc-wrap-right">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#rem-simple-flexible-适配方案"><span class="toc-number">1.</span> <span class="toc-text">rem + simple-flexible 适配方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单解析"><span class="toc-number">1.1.</span> <span class="toc-text">简单解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用步骤"><span class="toc-number">1.2.</span> <span class="toc-text">使用步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#优劣"><span class="toc-number">1.3.</span> <span class="toc-text">优劣</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rem-lib-flexible-适配方案"><span class="toc-number">2.</span> <span class="toc-text">rem + lib-flexible 适配方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单解析-1"><span class="toc-number">2.1.</span> <span class="toc-text">简单解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用步骤-1"><span class="toc-number">2.2.</span> <span class="toc-text">使用步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#优劣-1"><span class="toc-number">2.3.</span> <span class="toc-text">优劣</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PostCSS-VW-适配方案"><span class="toc-number">3.</span> <span class="toc-text">PostCSS + VW 适配方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单解析-2"><span class="toc-number">3.1.</span> <span class="toc-text">简单解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用步骤-2"><span class="toc-number">3.2.</span> <span class="toc-text">使用步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#优劣-2"><span class="toc-number">3.3.</span> <span class="toc-text">优劣</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附加-rem-也不需要计算的装置"><span class="toc-number">4.</span> <span class="toc-text">附加 rem 也不需要计算的装置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">5.</span> <span class="toc-text">总结</span></a></li></ol>
    </div>
  </div>
  <label class="mask" for="toggle-toc"></label>

<div id="post-content">
  <h1>愈发熟练的 CSS 技巧</h1>
  <p><img src="/images/CSS-Evolution-banner.jpg" alt=""></p>
<blockquote>
<p>这技巧，为何你会那么熟练 ？</p>
</blockquote>
<a id="more"></a>

<h2 id="rem-simple-flexible-适配方案"><a href="#rem-simple-flexible-适配方案" class="headerlink" title="rem + simple-flexible 适配方案"></a>rem + simple-flexible 适配方案</h2><h3 id="简单解析"><a href="#简单解析" class="headerlink" title="简单解析"></a>简单解析</h3><p><code>rem</code> 相对于根元素 <code>&lt;html&gt;</code> 的 <code>font-size</code> 的大小来计算坐作为一个单位；</p>
<p><code>simple-flexible</code> 是根据手淘团队 <code>lib-flexible.js</code>，比较，改写的一个插件，兼容 UC 竖屏转横屏出现的 BUG，自定义视觉设计稿的宽度：designWidth，设定最大宽度：maxWidth</p>
<p>这里有 <a href="https://github.com/kujian/simple-flexible" target="_blank" rel="noopener">simple-flexible</a> 的 <code>Github</code> 地址，下载下来用即可;</p>
<ul>
<li>第一个参数是视觉设计稿的宽度，一般视觉设计稿有 750px，可以根据实际调整</li>
<li>第二个参数则是设置制作稿的最大宽度，超过 750px，则以 750px 为最大限制；</li>
<li>使用时候的换算比例，是 1：100， 即 1rem = 100px；</li>
</ul>
<h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ol>
<li><p>复制上面这段代码到页面的 <code>&lt;head&gt;</code> 的 <code>&lt;script&gt;</code> 标签里面；</p>
</li>
<li><p>然后视觉设计稿大小，调整里面的最后两个参数值；</p>
</li>
<li><p>根据设计像素，使用 <code>rem</code> 单位转换的视觉设计稿里面的 <code>px</code> 单位，例： 750px = 7.5rem；</p>
</li>
</ol>
<h3 id="优劣"><a href="#优劣" class="headerlink" title="优劣"></a>优劣</h3><p>简单实用，基本上没有什么劣势，在 <a href="https://github.com/kujian/simple-flexible/issues/4" target="_blank" rel="noopener">IIS</a>上也已经对最新的 IPheonX 做出了适配方案，建议使用</p>
<h2 id="rem-lib-flexible-适配方案"><a href="#rem-lib-flexible-适配方案" class="headerlink" title="rem + lib-flexible 适配方案"></a>rem + lib-flexible 适配方案</h2><h3 id="简单解析-1"><a href="#简单解析-1" class="headerlink" title="简单解析"></a>简单解析</h3><p><code>lib-flexible.js</code> 是手淘团队制作的一个 Js 插件，实际上就是能过 JS 来动态改写 <code>&lt;meta&gt;</code> 标签；</p>
<p><code>lib-flexible.js</code> 基本原理是模拟 <code>vw</code> 把视觉稿分为 100份，以单位 a 来说，1rem = 10a;</p>
<p>以视觉稿 750px 为例子</p>
<pre class="line-numbers language-shell"><code class="language-shell">1a = 7.5px， 1rem = 75px<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="使用步骤-1"><a href="#使用步骤-1" class="headerlink" title="使用步骤"></a>使用步骤</h3><p>可以根据上面的步骤，外部引入 CDN 也可以</p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1, maximum-scale<span class="token punctuation">=</span>1, minimum-scale<span class="token punctuation">=</span>1, user-scalable<span class="token punctuation">=</span>no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./node_modules/amfe-flexible/index.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>也可以使用模块化方式</p>
<p>Npm:</p>
<pre class="line-numbers language-shell"><code class="language-shell">npm i -S amfe-flexible<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>JS:</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">'amfe-flexible'</span>

<span class="token comment" spellcheck="true">/*
do something
*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="优劣-1"><a href="#优劣-1" class="headerlink" title="优劣"></a>优劣</h3><p>在 UC 浏览器上发现了，横批竖屏转换不过来的情况，已经找到兼容方案，是通过js在页面的 <code>&lt;head&gt;</code> 里生成定义了 <code>&lt;html&gt;</code> 元素 <code>font-size</code> 的 <code>style</code> 元素来解决！</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>style id<span class="token operator">=</span><span class="token string">"rootFontSize"</span><span class="token operator">></span>html<span class="token punctuation">{</span>font<span class="token operator">-</span>size<span class="token punctuation">:</span> 100px <span class="token operator">!</span>important<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>而且官方也说明这个是 <code>vw</code> 的过度方案，不建议长期使用；</p>
<h2 id="PostCSS-VW-适配方案"><a href="#PostCSS-VW-适配方案" class="headerlink" title="PostCSS + VW 适配方案"></a>PostCSS + VW 适配方案</h2><h3 id="简单解析-2"><a href="#简单解析-2" class="headerlink" title="简单解析"></a>简单解析</h3><p><code>PostCSS</code> 将 <code>CSS</code> 变成 <code>JavaScript</code> 的数据，使它变成可操作;</p>
<p><code>VW</code> 是基于 Viewpost 视窗的长度单位;</p>
<p><code>Viewpost</code> 是指浏览器可视化的区域，而可视化区域即是 <code>window.innerWidth/window.innerHeight</code> 的大小;</p>
<p>与 <code>Viewpost</code> 相关的单位有以下四个</p>
<ul>
<li><code>vw</code> : 是 Viewport width 的简写 1vw = window.innerWidth的 1%；</li>
<li><code>vh</code> : 是 Viewport height 的简写 1vw = window.innerHeight 1%；</li>
<li><code>vmin</code> : vw 和 vh 之间的较小值</li>
<li><code>vmax</code> : vw 和 vh 之间的较大值</li>
</ul>
<h3 id="使用步骤-2"><a href="#使用步骤-2" class="headerlink" title="使用步骤"></a>使用步骤</h3><p>假设视觉设计稿的宽度是 750px 即 1vw = 7.5px，那么就得根据设计图的 px 值来转换 vw单位，为了避免这样的计算，当然就需要使用到 <code>PostCSS</code> ，以及 <code>postcss-px-to-viewport</code> 一个 <code>PostCSS</code> 的插件</p>
<p>本方案使用打包工具构建项目的时候使用是最酸爽的，建议在以下环境下尝试；</p>
<ul>
<li><a href="https://parceljs.org/" target="_blank" rel="noopener">parceljs</a></li>
<li><a href="https://webpack.docschina.org/" target="_blank" rel="noopener">webpack</a></li>
</ul>
<p>有过使用前端脚手架的童鞋，应该都有看到过项目根目录下面都会有一个 <code>.postcssrc</code> 文件，它里面都是一些配置选项比较著名的 <code>autoprefixer</code>，<code>cssnano</code>，<code>px2rem</code>，<code>cssnext</code>…等等好玩的配置插件，但是这里不作这些说明，只介绍 <code>postcss-px-to-viewport</code> 配合 vw 使用</p>
<p>Npm：</p>
<pre class="line-numbers language-shell"><code class="language-shell">npm i -S postcss-px-to-viewport<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>打开 <code>.postcssrc</code>，假定视觉设计稿的宽度为 750px 改写配置如下：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//...</span>
<span class="token string">"plugins"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"postcss-px-to-viewport"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">"rule"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">"postcss-px-to-viewport"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"viewportWidth"</span><span class="token punctuation">:</span> <span class="token number">750</span><span class="token punctuation">,</span>
    <span class="token string">"viewportHeight"</span><span class="token punctuation">:</span> <span class="token number">1334</span><span class="token punctuation">,</span>
    <span class="token string">"unitPrecision"</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">"viewportUnit"</span><span class="token punctuation">:</span> <span class="token string">"vw"</span><span class="token punctuation">,</span>
    <span class="token string">"selectorBlackList"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"minPixelValue"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"mediaQuery"</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>配置完成之后，在项目中直接使用 px ，构建的时候就会自动转换为 vw 单位了，简直不要太爽了；</p>
<p><code>postcss-px-to-viewport</code> 配置项说明</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token string">"viewportWidth"</span>        <span class="token comment" spellcheck="true">//设置视觉设计稿的宽度</span>
<span class="token string">"viewportHeight"</span>       <span class="token comment" spellcheck="true">//设置视觉设计稿的高度</span>
<span class="token string">"unitPrecision"</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true">//单位的精度，即保留多少位小数</span>
<span class="token string">"viewportUnit"</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true">//转换的单位</span>
<span class="token string">"selectorBlackList"</span><span class="token punctuation">:</span>   <span class="token comment" spellcheck="true">//需要忽略的选择器</span>
<span class="token string">"minPixelValue"</span><span class="token punctuation">:</span>       <span class="token comment" spellcheck="true">//最小像素值</span>
<span class="token string">"mediaQuery"</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true">//是否允许媒体查询转换为 px</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="优劣-2"><a href="#优劣-2" class="headerlink" title="优劣"></a>优劣</h3><p>vw 的兼容性貌似还没那么好，有可能需要做降级处理，需要使用到 CSS Houdini 和 CSS Polyfill 上一些针对 vw 单位做一个降级处理；</p>
<p>vw 在混合使用到 margin 的 px 时候 有可能超出 100vw ，目前使用 padding 来代替 marging 再配置上 box-sizing 可以解决，亦可以使用 css 的 calc() 函数来做一个计算；</p>
<p>转换的时候多少还存在一点像素差，无法完全还原；</p>
<h2 id="附加-rem-也不需要计算的装置"><a href="#附加-rem-也不需要计算的装置" class="headerlink" title="附加 rem 也不需要计算的装置"></a>附加 rem 也不需要计算的装置</h2><p>在 sublime 上面，有一个插件 <a href="https://github.com/flashlizi/cssrem" target="_blank" rel="noopener">cssrem</a> 可以让放手写 px 然后 sublime 自动转换成 rem ，简直可能爱上了 css，</p>
<p>配置说明如下：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript">px_to_rem                   <span class="token comment" spellcheck="true">// px转rem的单位比例，默认为40，基本定义是视觉设计稿的宽度/10；</span>
max_rem_fraction_length     <span class="token comment" spellcheck="true">// px转rem的小数部分的最大长度，默认为6；</span>
available_file_types        <span class="token comment" spellcheck="true">// 启用此插件的文件类型。默认为：[".css", ".less", ".sass"]；</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这里总结的三种适配方案本人都有在用，如果说用得最多的应该是第一种了，因为发现的时间比较早，所以用的自然也比较多了；</p>
<p>当然，还有很多本人未知的方案，但是所有的适配方案都是为了完美的还原视觉设计稿，完美解决兼容性问题，当然这都是理想状态；</p>
<p>感谢 <a href="https://github.com/ZhangPuXi" target="_blank" rel="noopener">@白白</a> 的帮忙(名词解析) + 鼓励(催稿)</p>
<p>感谢 <a href="https://www.w3cplus.com/" target="_blank" rel="noopener">@w3cplus</a>，<a href="http://caibaojian.com/" target="_blank" rel="noopener">@前端开发博客</a>，</p>
<p>感谢两位的四篇文章，给我带来的启发</p>
<ul>
<li><a href="https://www.w3cplus.com/css/vw-for-layout.html" target="_blank" rel="noopener">再聊移动端页面的适配</a></li>
<li><a href="https://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html" target="_blank" rel="noopener">使用Flexible实现手淘H5页面的终端适配</a></li>
<li><a href="http://caibaojian.com/flexible-js.html" target="_blank" rel="noopener">rem自适应布局</a></li>
<li><a href="http://caibaojian.com/simple-flexible.html" target="_blank" rel="noopener">rem自适应js</a></li>
</ul>

</div>

<script>
  // I'm not sure your browser supports `es6`
  window.addEventListener('load', function () {
    [].concat(Array.from(document.querySelectorAll('code')), Array.from(document.querySelectorAll('pre'))).filter(function (item) {return item.className.indexOf('language') >= 0}).forEach(function (tag) { tag.classList.add('line-numbers') })
    Prism.highlightAll()

    let scrollY = window.scrollY
    let headersList = Array.from(document.querySelector('#post-content').querySelectorAll('h1,h2,h3,h4,h5,h6')).map(function (item) {
      let rect = item.getBoundingClientRect()
      let anchorTag = document.querySelector(`a.toc-link[href="#${item.id}"]`)

      if (!anchorTag) return
      return {
        top: scrollY + rect.top - rect.height,
        tag: item,
        anchorTag: anchorTag
      }
    }).filter(function (item) { return item })

    window.addEventListener('scroll', debounce(scrollHandler, 200))
    scrollHandler()

    function scrollHandler () {
      let scrollY = window.scrollY
      let minInfo = null

      for (let item of headersList) {
        if (!minInfo) {
          minInfo = item
          continue
        }

        if ((scrollY - item.top) >= 0 && (scrollY - minInfo.top) > (scrollY - item.top)) {
          minInfo = item
        }
      }

      if (minInfo) {
        headersList.forEach(function (item) {
          item.anchorTag && item.anchorTag.classList.remove('selected')
        })
        minInfo.anchorTag.classList.add('selected')
      }
    }

    function debounce (func, delay) {
      let debounceIdentify = 0
      return function () {
        debounceIdentify && clearTimeout(debounceIdentify)
        debounceIdentify = setTimeout(function () {
          debounceIdentify = 0
          func.apply(this, arguments)
        }, delay)
      }
    }
  })
</script>

        </main>
        <a href="#" class="goto-top">
          <i class="fa fa-chevron-up"></i>
        </a>
    </div>
    <footer class="footer">
  <div class="footer-content">
    <div class="footer-info" class="inner">
      <p class="copyright">&copy; 2021 时之物语 ZYG&#39;s Blog 保留一切权利 ｜ 粤ICP备15078531号-1<br></p>
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      theme by <a href="https://github.com/Jiasm/hexo-theme-sheet" target="_blank">Sheet</a>
    </div>
    <ul class="contact-info">
      
        <a class="contact-link" href="https://github.com/zindexyg" target="_blank"><i class="fa fa-github"></i></a>
      
      
        <a class="contact-link" href="https://weibo.com/u/3249847654" target="_blank"><i class="fa fa-weibo"></i></a>
      
      
      
      
        <a class="contact-link" href="mailto:zinger_yg@163.com" target="_blank"><i class="fa fa-envelope"></i></a>
      
    </ul>
  </div>
</footer>



      <script>
      function footerHandler () {
        if (!window.screen || !document.body) return
        var hasComments = document.querySelector('.comments')
        if ((window.screen.availHeight - (hasComments ? 350 : 0)) > document.body.clientHeight) {
          document.body.classList.add('fixed')
        } else {
          document.body.classList.remove('fixed')
        }
      }
      footerHandler()
      window.addEventListener('resize', footerHandler)
    </script>
  </body>
  <script>
    var pathname = new URL(location.href).pathname.replace(/\/$/, '')

    switch (pathname) {
      case '/about':
        document.querySelector('.menu-item-about').classList.add('active')
        break
      case '/contact':
        document.querySelector('.menu-item-contact').classList.add('active')
        break
      case '/links':
        document.querySelector('.menu-item-friends').classList.add('active')
        break
      default:
        document.querySelector('.menu-item-home').classList.add('active')
    }
  </script>
  

</html>
